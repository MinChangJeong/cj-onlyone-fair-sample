---
applyTo: '**'
---

# Project Instructions for Claude Code

## Project Overview
This project is developed using Visual Studio with Claude Code integration.

## Coding Style and Rules

### General Principles
- **Clarity**: Code should be self-documenting, with comments added for complex logic
- **Consistency**: Maintain the same naming conventions and structure throughout the project
- **Simplicity**: Avoid unnecessary duplication and follow the DRY (Don't Repeat Yourself) principle

### Naming Conventions
- **Classes/Interfaces**: PascalCase (e.g., `UserService`, `IRepository`)
- **Methods/Properties**: PascalCase (e.g., `GetUserById`, `UserName`)
- **Variables/Parameters**: camelCase (e.g., `userId`, `itemCount`)
- **Constants**: UPPER_SNAKE_CASE (e.g., `MAX_RETRY_COUNT`)
- **Private Fields**: _camelCase (e.g., `_dbContext`, `_logger`)

### File Structure
```
/src
  /Domain         # Domain models and business logic
  /Application    # Application service layer
  /Infrastructure # Data access, external service integration
  /API            # API controllers and endpoints
/tests
  /UnitTests      # Unit tests
  /IntegrationTests # Integration tests
```

## Code Writing Guidelines

### Error Handling
- All public methods should include appropriate exception handling
- Use custom exceptions with clear messages
- try-catch blocks should handle specific exception types first

### Asynchronous Programming
- Always handle I/O operations asynchronously (`async`/`await`)
- Async methods should use the `Async` suffix (e.g., `GetUserAsync`)
- Use `ConfigureAwait(false)` in library code

### Dependency Injection
- Prefer constructor injection
- Manage dependencies through interfaces as a principle
- Clearly define service lifetimes (Scoped, Transient, Singleton)

### Testing
- Write unit tests for all business logic
- Follow the AAA pattern (Arrange-Act-Assert)
- Write clear test method names: `MethodName_Scenario_ExpectedBehavior`

## Visual Studio Integration Guide

### Solution Structure
- Each project should have a clear responsibility
- Separate common code into a Shared project
- Manage NuGet package versions centrally

### Code Review Checklist
When generating or modifying code, verify the following:
- [ ] Naming convention compliance
- [ ] Appropriate exception handling
- [ ] XML documentation comments added (public API)
- [ ] Unit tests written or updated
- [ ] Unnecessary using statements removed
- [ ] Code duplication minimized

## Claude Code Usage Guidelines

### Information to Include in Requests
When requesting code generation or modification, please specify:
- The purpose of the feature to be implemented
- Related existing code or files
- Special constraints or requirements
- Preferred design patterns or architecture

### Code Review
Always review code generated by Claude and:
- Verify consistency with existing project patterns
- Check for security vulnerabilities
- Consider performance impact
- Evaluate testability

## Documentation

### XML Documentation Comments
Add XML documentation comments to all public APIs:
```csharp
/// <summary>
/// Retrieves user information by ID.
/// </summary>
/// <param name="userId">The ID of the user to retrieve</param>
/// <returns>User information or null</returns>
/// <exception cref="ArgumentException">When userId is invalid</exception>
public async Task<User?> GetUserByIdAsync(string userId)
{
    // Implementation...
}
```

### README Updates
Update README.md when adding major features:
- New feature descriptions
- Usage examples
- Configuration instructions

## Security Guidelines

- **Sensitive Information**: No hardcoding, use environment variables or Secret Manager
- **Input Validation**: Validate and sanitize all external inputs
- **SQL Injection**: Use parameterized queries or ORM
- **Authentication/Authorization**: Implement proper permission checks on all endpoints

## Performance Optimization

- Use pagination for large datasets
- Select only necessary fields in database queries
- Utilize caching strategies appropriately
- Watch out for N+1 query problems

## Version Control

### Commit Message Format
```
<type>: <subject>

<body>

<footer>
```

**Type:**
- `feat`: New feature
- `fix`: Bug fix
- `docs`: Documentation changes
- `refactor`: Refactoring
- `test`: Adding/modifying tests
- `chore`: Build, configuration changes

## Additional Resources

- [C# Coding Conventions](https://docs.microsoft.com/dotnet/csharp/fundamentals/coding-style/coding-conventions)
- [.NET API Design Guidelines](https://docs.microsoft.com/dotnet/standard/design-guidelines/)
- [Visual Studio Productivity Tips](https://docs.microsoft.com/visualstudio/ide/productivity-features)

---

**Note**: These guidelines are continuously updated as the project evolves. Please consult with team members to add or modify sections as needed.